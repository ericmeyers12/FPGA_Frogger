module aes_testbench();
   timeunit 10ns;// Half clock cycle at 50 MHz
   // This is the amount of time represented by #1
   timeprecision 1ns;
   
   // These signals are internal because the control will be
   // instantiated as a submodule in testbench.
   logic [127:0]  msg_en;
   
   logic [127:0]  key;
   
   logic          clk, 
                  reset_n;
   
   logic [127:0]  msg_de;
   logic          aes_ready, io_ready;
                       
   // A counter to count the instances where simulation results
   // do no match with expected results
   integer      ErrorCnt = 0;

   // Instantiating the DUT
   // Make sure the module and signal names match with those in your design
   aes_controller aes(.*);
	
	// Toggle the clock
   // #1 means wait for a delay of 1 timeunit
   always begin : CLOCK_GENERATION
      #1 clk = ~clk;
   end

   initial begin: CLOCK_INITIALIZATION
      clk = 0;
   end

   //Testing starts
   initial begin: TEST_VECTORS
      msg_en = 128'h439d619920ce415661019634f59fcf63;
      key = 128'h3b280014beaac269d613a16bfdc2be03;
      reset_n = 1;
      io_ready = 0;
      
      #2 reset_n = 0;

      #3 reset_n = 1;
      
      #4 io_ready = 1;
      
      if (ErrorCnt == 0)
        $display("Success!");
      else
        $display("%d error(s) detected. Try again!", ErrorCnt);
   end

endmodule

